<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Post Queue</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css" rel="stylesheet">
    <link href="../css/dashboard.css" rel="stylesheet">
    <link href="../css/queue.css" rel="stylesheet">
</head>
<body>
    <div id="layout-placeholder"></div>
    
    <div class="bg-white rounded-2xl shadow-lg overflow-hidden border border-gray-100">
        <!-- Header Section -->
        <div class="bg-gradient-to-r from-blue-600 to-indigo-600 p-6">
            <div class="flex justify-between items-center">
                <div>
                    <h3 class="text-2xl font-bold text-white mb-1">Post Queue</h3>
                    <p class="text-blue-100">Manage your upcoming and published posts</p>
                </div>
                <button class="refresh-btn bg-white bg-opacity-20 hover:bg-opacity-30 text-white rounded-lg px-4 py-2 flex items-center transition-all duration-200" onclick="refreshQueue()">
                    <i class="fas fa-sync-alt mr-2"></i>
                    Refresh
                </button>
            </div>
        </div>
        
        <div class="p-6">
            <!-- Queue Tabs -->
            <div class="flex border-b border-gray-200 mb-6">
                <button class="queue-tab active px-6 py-3 border-b-2 border-blue-600 text-blue-600 font-medium flex items-center" data-tab="pending">
                    <span class="tab-icon bg-blue-100 text-blue-600 p-2 rounded-full mr-2">
                        <i class="fas fa-clock"></i>
                    </span>
                    Pending
                    <span class="ml-2 bg-blue-100 text-blue-700 text-xs font-medium rounded-full px-2 py-1 count-badge">0</span>
                </button>
                <button class="queue-tab px-6 py-3 text-gray-500 hover:text-gray-700 font-medium flex items-center" data-tab="published">
                    <span class="tab-icon bg-green-100 text-green-600 p-2 rounded-full mr-2">
                        <i class="fas fa-check-circle"></i>
                    </span>
                    Published
                    <span class="ml-2 bg-green-100 text-green-700 text-xs font-medium rounded-full px-2 py-1 count-badge">0</span>
                </button>
            </div>

            <!-- Queue Content -->
            <div id="pending-queue" class="queue-content">
                <!-- Empty state will be shown when no posts are available -->
                <div class="empty-state text-center py-16">
                    <div class="w-20 h-20 mx-auto bg-blue-100 rounded-full flex items-center justify-center mb-4">
                        <i class="fas fa-clock text-blue-500 text-3xl"></i>
                    </div>
                    <h4 class="text-xl font-medium text-gray-700 mb-2">No pending posts</h4>
                    <p class="text-gray-500 mb-6 max-w-md mx-auto">There are no posts waiting to be published. Create a new post and add it to the queue.</p>
                    <a href="compose.html" class="btn-primary">
                        <i class="fas fa-plus mr-2"></i>
                        Create New Post
                    </a>
                </div>

                <!-- Post container - posts will be inserted here dynamically -->
                <div id="pending-posts-container" class="space-y-6">
                    <!-- Posts will be inserted here by JavaScript -->
                </div>
            </div>

            <div id="published-queue" class="queue-content hidden">
                <!-- Empty state will be shown when no posts are available -->
                <div class="empty-state text-center py-16">
                    <div class="w-20 h-20 mx-auto bg-green-100 rounded-full flex items-center justify-center mb-4">
                        <i class="fas fa-check-circle text-green-500 text-3xl"></i>
                    </div>
                    <h4 class="text-xl font-medium text-gray-700 mb-2">No published posts yet</h4>
                    <p class="text-gray-500 mb-6">Once your posts are published, they will appear here.</p>
                    <a href="compose.html" class="btn-primary">
                        <i class="fas fa-plus mr-2"></i>
                        Create New Post
                    </a>
                </div>

                <!-- Published posts container - posts will be inserted here dynamically -->
                <div id="published-posts-container" class="space-y-6">
                    <!-- Posts will be inserted here by JavaScript -->
                </div>
            </div>
        </div>
    </div>

    <!-- Template for pending post item (hidden) -->
    <template id="pending-post-template">
        <div class="post-item bg-gray-50 rounded-xl p-4 border border-gray-200 hover:border-blue-300 transition-all duration-200">
            <div class="flex justify-between mb-3">
                <div class="flex items-center">
                    <div class="w-10 h-10 bg-gradient-to-r from-purple-500 to-indigo-600 rounded-full flex items-center justify-center text-white font-bold">
                        <i class="fab fa-mastodon"></i>
                    </div>
                    <span class="ml-2 font-medium text-gray-700">Mastodon</span>
                    <span class="ml-2 text-xs post-status px-2 py-1 rounded-full"></span>
                </div>
                <div class="text-sm text-gray-500 post-schedule">
                    <i class="far fa-calendar mr-1"></i>
                    <span class="schedule-text"></span>
                </div>
            </div>
            <div class="post-content mb-3">
                <p class="text-gray-700"></p>
            </div>
            <div class="flex justify-end space-x-2">
                <button class="btn-icon text-gray-600 hover:text-blue-600 edit-btn">
                    <i class="fas fa-edit"></i>
                </button>
                <button class="btn-icon text-gray-600 hover:text-red-600 delete-btn">
                    <i class="fas fa-trash"></i>
                </button>
            </div>
        </div>
    </template>

    <!-- Template for published post item (hidden) -->
    <template id="published-post-template">
        <div class="post-item bg-gray-50 rounded-xl p-4 border border-gray-200">
            <div class="flex justify-between mb-3">
                <div class="flex items-center">
                    <div class="w-10 h-10 bg-gradient-to-r from-purple-500 to-indigo-600 rounded-full flex items-center justify-center text-white font-bold">
                        <i class="fab fa-mastodon"></i>
                    </div>
                    <span class="ml-2 font-medium text-gray-700">Mastodon</span>
                    <span class="ml-2 text-xs bg-green-100 text-green-700 px-2 py-1 rounded-full">Published</span>
                </div>
                <div class="text-sm text-gray-500">
                    <i class="far fa-clock mr-1"></i>
                    <span class="published-time"></span>
                </div>
            </div>
            <div class="post-content mb-3">
                <p class="text-gray-700"></p>
            </div>
            <div class="flex justify-end">
                <a href="#" class="text-blue-600 hover:text-blue-800 text-sm flex items-center view-link">
                    <i class="fas fa-external-link-alt mr-1"></i>
                    View on Mastodon
                </a>
            </div>
        </div>
    </template>

    <!-- Scripts -->
    <script src="../components/queue.js"></script>
    <script src="../components/layout.js"></script>
    <script src="../utils/auth.js"></script>
</body>
</html>
